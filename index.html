<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚≠ï PROTESTA #yosiquefelicito ‚≠ï</title>
    <style>
        :root {
            --primary-color: #ff4500;
            --secondary-color: #4169e1;
            --accent-color: #32cd32;
            --background-color: #f8f9fa;
            --text-color: #212529;
            --alert-color: #dc3545;
            --card-bg: white;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            --border-color: #eee;
        }
        
        [data-theme="dark"] {
            --primary-color: #ff6347;
            --secondary-color: #6495ed;
            --accent-color: #3cb371;
            --background-color: #121212;
            --text-color: #e0e0e0;
            --alert-color: #ff4444;
            --card-bg: #1e1e1e;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            --border-color: #333;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background-color: var(--background-color);
            color: var(--text-color);
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            overflow-x: hidden;
        }
        
        .hidden {
            display: none !important;
        }
        
        .alert-banner {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            animation: pulse 2s infinite;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .countdown-container {
            background-color: var(--alert-color);
            color: white;
            text-align: center;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .countdown {
            font-size: 1.5em;
            font-weight: bold;
            margin-top: 5px;
        }
        
        .utility-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .utility-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .utility-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .incognito-btn {
            background-color: #888;
            color: white;
        }
        
        .dark-mode-btn {
            background-color: #333;
            color: white;
        }
        
        .excuse-btn {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .certificate-btn {
            background-color: var(--accent-color);
            color: white;
        }
        
        .ip-check-btn {
            background-color: var(--primary-color);
            color: white;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        
        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary-color);
        }
        
        .message {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
            font-size: 1.1em;
            line-height: 1.8;
        }
        
        .message strong {
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .highlight {
            background-color: yellow;
            padding: 2px 5px;
            font-weight: bold;
            color: black;
        }
        
        .irish-flag {
            display: inline-block;
            margin: 0 5px;
        }
        
        .tab-container {
            display: flex;
            margin-bottom: 10px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #ddd;
            border: 1px solid #ccc;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
        }
        
        .tab.active {
            background-color: var(--card-bg);
            border-bottom: 2px solid var(--primary-color);
            font-weight: bold;
        }
        
        [data-theme="dark"] .tab {
            background-color: #333;
            border-color: #444;
        }
        
        [data-theme="dark"] .tab.active {
            background-color: var(--card-bg);
            border-bottom: 2px solid var(--primary-color);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-container {
            background-color: var(--card-bg);
            padding: 25px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
        }
        
        .form-title {
            text-align: center;
            margin-bottom: 20px;
            color: var(--secondary-color);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        input, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 16px;
            background-color: var(--card-bg);
            color: var(--text-color);
        }
        
        textarea {
            height: 100px;
            resize: vertical;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 12px 24px;
            cursor: pointer;
            font-size: 16px;
            border-radius: 4px;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .btn:hover {
            background-color: #228B22;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .signatures {
            background-color: var(--card-bg);
            padding: 25px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
        }
        
        .signatures-title {
            text-align: center;
            margin-bottom: 20px;
            color: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .counter {
            background-color: var(--secondary-color);
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 10px;
            font-weight: bold;
        }
        
        .signature-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            padding: 10px;
            border-radius: 4px;
        }
        
        .signature-item {
            border-bottom: 1px solid var(--border-color);
            padding: 10px 0;
            display: flex;
            justify-content: space-between;
        }
        
        .signature-item:last-child {
            border-bottom: none;
        }
        
        .name {
            font-weight: bold;
            color: var(--secondary-color);
        }
        
        .message-text {
            color: #666;
            font-style: italic;
            margin-top: 5px;
        }
        
        [data-theme="dark"] .message-text {
            color: #aaa;
        }
        
        .timestamp {
            color: #999;
            font-size: 0.8em;
        }
        
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            border-radius: 0;
        }
        
        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            text-align: center;
            z-index: 1000;
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal.show {
            transform: translate(-50%, -50%) scale(1);
        }
        
        .modal h2 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .modal p {
            margin-bottom: 20px;
        }
        
        .close-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            color: #666;
            font-size: 0.9em;
        }
        
        [data-theme="dark"] footer {
            color: #aaa;
        }
        
        .irish-colors {
            display: inline-block;
            padding: 2px 5px;
            background: linear-gradient(to right, #009A49 33%, white 33%, white 66%, #FF7900 66%);
            color: black;
            font-weight: bold;
            border-radius: 3px;
        }
        
        #fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 999;
        }
        
        /* Mapa interactivo */
        .map-container {
            position: relative;
            width: 100%;
            height: 300px;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBkPSJNMjM1LDMyYzE0LjQsMCwyNSwxMS4xLDI3LjMsMjNIMTU1LjhMMTYwLDQ4QzE2OS42LDM4LjQsMTgzLjQsMzIsMTk5LDMySDIzNXogTTEyMS43LDcyaDE0Ni40bC0xNS44LDU1LjNjLTEuMiw0LjItNS4xLDcuMS05LjUsNy4xaC05OC43Yy00LjQsMC04LjMtMi45LTkuNS03LjFMMTIxLjcsNzJ6IE0zNiwzMTkuOVYzNjIuMWExNiwxNiAwIDAgMCAxNiwxNmgyNzJhMTYsMTYgMCAwIDAgMTYtMTZ2LTQyLjFhMTYsMTYgMCAwIDAtMTYtMTZINTJBMTYsMTYgMCAwIDAgMzYsMzE5Ljl6IiBmaWxsPSIjZjVmNWY1Ii8+PHBhdGggZD0iTTEyNiwyODhoOTZjNi42LDAsMTItNS40LDEyLTEydi00MGMwLTYuNi01LjQtMTItMTItMTJoLTk2Yy02LjYsMC0xMiw1LjQtMTIsMTJ2NDBDMTE0LDI4Mi42LDExOS40LDI4OCwxMjYsMjg4eiIgZmlsbD0iI2Y1ZjVmNSIvPjxwYXRoIGQ9Ik0zNzYsMTQ0YzAtOC44LTcuMi0xNi0xNi0xNkgxNTJjLTguOCwwLTE2LDcuMi0xNiwxNnYxNmMwLDguOCw3LjIsMTYsMTYsMTZoMjA4YzguOCwwLDE2LTcuMiwxNi0xNlYxNDR6IiBmaWxsPSIjZjVmNWY1Ii8+PC9zdmc+');
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .map-dot {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: var(--primary-color);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: pulse-dot 1.5s infinite;
        }
        
        @keyframes pulse-dot {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.5);
                opacity: 0.7;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }
        
        /* Se Busca secci√≥n */
        .wanted-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .wanted-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            display: flex;
            flex-direction: column;
        }
        
        .wanted-header {
            background-color: var(--alert-color);
            color: white;
            text-align: center;
            padding: 10px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .wanted-img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            background-color: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: #888;
        }
        
        .wanted-info {
            padding: 15px;
        }
        
        .wanted-name {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 5px;
        }
        
        .wanted-crime {
            font-style: italic;
            margin-bottom: 10px;
            color: #666;
        }
        
        [data-theme="dark"] .wanted-crime {
            color: #aaa;
        }
        
        .wanted-reward {
            font-weight: bold;
            color: var(--secondary-color);
        }
        
        /* Galer√≠a de acciones previas */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .gallery-item {
            background-color: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
        }
        
        .gallery-img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            background-color: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #888;
        }
        
        .gallery-caption {
            padding: 10px;
            font-size: 0.9em;
            text-align: center;
            font-style: italic;
        }
        
        /* Verificador de IP */
        .ip-check {
            padding: 20px;
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
        }
        
        .ip-status {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }
        
        .status-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .status-icon.checking {
            background-color: #ffbf00;
            animation: pulse 1s infinite;
        }
        
        .status-icon.secure {
            background-color: #00bf00;
        }
        
        .loading-bar {
            height: 10px;
            width: 100%;
            background-color: #ddd;
            border-radius: 5px;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .loading-progress {
            height: 100%;
            width: 0%;
            background-color: var(--secondary-color);
            transition: width 0.5s ease;
        }
        
        /* Certificado de rebeld√≠a */
        .certificate-container {
            position: relative;
            background-color: var(--card-bg);
            border: 10px solid #f5ca7a;
            padding: 40px;
            width: 100%;
            max-width: 700px;
            margin: 0 auto;
            text-align: center;
            font-family: 'Times New Roman', Times, serif;
        }
        
        .certificate-header {
            font-size: 2em;
            margin-bottom: 20px;
            color: #8b4513;
        }
        
        .certificate-title {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 30px;
            color: #8b4513;
        }
        
        .certificate-body {
            font-size: 1.2em;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .certificate-name {
            font-size: 1.8em;
            font-weight: bold;
            margin: 20px 0;
            color: #8b4513;
            border-bottom: 2px solid #8b4513;
            display: inline-block;
            padding: 0 20px 5px;
        }
        
        .certificate-footer {
            margin-top: 40px;
            display: flex;
            justify-content: space-around;
        }
        
        .certificate-seal {
            width: 100px;
            height: 100px;
            border: 2px solid #8b4513;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            color: #8b4513;
            transform: rotate(-15deg);
        }
        
        .certificate-signature {
            font-family: 'Brush Script MT', cursive;
            font-size: 1.5em;
            margin-top: 20px;
            color: #555;
        }
        
        .certificate-watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-30deg);
            font-size: 8em;
            opacity: 0.03;
            color: #000;
            white-space: nowrap;
            pointer-events: none;
        }
        
        /* P√°gina de recetas (modo inc√≥gnito) */
        .recipe-page {
            background-color: var(--card-bg);
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            font-family: 'Georgia', serif;
        }
        
        .recipe-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .recipe-title {
            font-size: 2em;
            color: #5a8f3a;
            margin-bottom: 10px;
        }
        
        .recipe-meta {
            color: #777;
            font-style: italic;
        }
        
        .recipe-img {
            width: 100%;
            height: 300px;
            background-color: #eee;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            color: #888;
        }
        
        .recipe-section {
            margin-bottom: 30px;
        }
        
        .recipe-section h3 {
            border-bottom: 2px solid #5a8f3a;
            padding-bottom: 5px;
            margin-bottom: 15px;
            color: #5a8f3a;
        }
        
        .ingredients-list li, .instructions-list li {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        .instructions-list {
            counter-reset: instructions;
        }
        
        .instructions-list li {
            position: relative;
            padding-left: 40px;
            margin-bottom: 15px;
        }
        
        .instructions-list li::before {
            counter-increment: instructions;
            content: counter(instructions);
            position: absolute;
            left: 0;
            top: 0;
            background-color: #5a8f3a;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* Estilos de pantalla peque√±a */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            
            .message, .form-container, .signatures {
                padding: 15px;
            }
            
            .btn {
                width: 100%;
            }
            
            .certificate-container {
                padding: 20px;
            }
            
            .certificate-title {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <!-- P√°gina normal (protesta) -->
    <div id="protest-page">
        <div class="alert-banner">
            <span>‚≠ï ATENCI√ìN: PROTESTA EN CURSO ‚≠ï</span>
            <span id="clock">19:45</span>
        </div>
        
        <div class="countdown-container">
            <div>‚ö†Ô∏è TIEMPO RESTANTE ANTES DE QUE LAS AUTORIDADES RASTREEN ESTA WEB ‚ö†Ô∏è</div>
            <div class="countdown" id="countdown">05:00</div>
        </div>
        
        <div class="utility-buttons">
            <button class="utility-btn incognito-btn" id="incognito-btn">
                <span>ü•∏</span> Modo Inc√≥gnito
            </button>
            <button class="utility-btn dark-mode-btn" id="dark-mode-btn">
                <span>üåô</span> Modo Nocturno
            </button>
            <button class="utility-btn excuse-btn" id="excuse-btn">
                <span>üó£Ô∏è</span> Generar Excusa
            </button>
            <button class="utility-btn certificate-btn" id="certificate-btn">
                <span>üìú</span> Certificado Rebelde
            </button>
            <button class="utility-btn ip-check-btn" id="ip-check-btn">
                <span>üîí</span> Verificar Conexi√≥n
            </button>
        </div>
        
        <h1>Campa√±a #yosiquefelicito</h1>
        
        <div class="message">
            <p>‚≠ï <strong>Atenci√≥n</strong> ‚≠ï</p>
            <p>Se nos acaba, se nos acaba el chollo. El perro sanxe (en colaboraci√≥n con otros √≥rganos enemigos de la diversi√≥n) acaba de decretar <span class="highlight">ilegal</span> felicitar cumplea√±os a partir de hoy 1 de abril de 2025.</p>
            <p>La medida, ya entrada en vigor, ha sido recibida por la ciudadan√≠a con desagrado y esta est√° mostrando su rechazo felicitando el cumplea√±os a <strong>Jaime</strong> en un alarde de solidaridad y rebeld√≠a colectiva.</p>
            <p>√önete a la protesta firmando en el formulario de abajo ‚¨áÔ∏è</p>
            <p><strong>#yosiquefelicito</strong></p>
            <p>El pueblo irland√©s permanecer√° ingobernable <span class="irish-colors">üçÄüáÆüá™‚úä</span></p>
        </div>
        
        <div class="tab-container">
            <div class="tab active" data-tab="firmar">Firmar Protesta</div>
            <div class="tab" data-tab="mapa">Mapa de Resistencia</div>
            <div class="tab" data-tab="buscados">Se Busca</div>
            <div class="tab" data-tab="galeria">Acciones Previas</div>
        </div>
        
        <div class="tab-content active" id="firmar-tab">
            <div class="form-container">
                <h2 class="form-title">Firma la protesta</h2>
                <form id="protest-form">
                    <div class="form-group">
                        <label for="name">Tu nombre:</label>
                        <input type="text" id="name" name="name" required placeholder="Escribe tu nombre aqu√≠">
                    </div>
                    <div class="form-group">
                        <label for="message">Mensaje de felicitaci√≥n para Jaime (opcional):</label>
                        <textarea id="message" name="message" placeholder="Escribe un mensaje para Jaime..."></textarea>
                    </div>
                    <button type="submit" class="btn">¬°Firmar la protesta!</button>
                </form>
            </div>
            
            <div class="signatures">
                <div class="signatures-title">
                    <h2>Firmas de protesta</h2>
                    <div class="counter" id="signature-count">11</div>
                </div>
                <div class="signature-list" id="signature-list">
                    <!-- Las firmas se cargar√°n din√°micamente con JavaScript -->
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="mapa-tab">
            <div class="form-container">
                <h2 class="form-title">Mapa nacional de la resistencia</h2>
                <p style="margin-bottom: 15px;">La revoluci√≥n contra la prohibici√≥n de cumplea√±os est√° extendi√©ndose por toda Espa√±a. Estos son los focos m√°s activos de la resistencia:</p>
                
                <div class="map-container" id="resistance-map">
                    <!-- Los puntos ser√°n generados por JavaScript -->
                </div>
                
                <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                    <div>
                        <span style="color: var(--primary-color);">‚óè</span> Focos activos
                    </div>
                    <div>
                        <strong>Rebeldes activos:</strong> <span id="rebels-count">1,247</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="buscados-tab">
            <div class="form-container">
                <h2 class="form-title">Se Busca: Rebeldes de los Cumplea√±os</h2>
                <p style="margin-bottom: 15px;">Los siguientes individuos han sido sorprendidos felicitando cumplea√±os a pesar de la prohibici√≥n nacional. Se ofrecen recompensas por informaci√≥n sobre su paradero.</p>
                
                <div class="wanted-grid" id="wanted-grid">
                    <!-- Las tarjetas se generar√°n con JavaScript -->
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="galeria-tab">
            <div class="form-container">
                <h2 class="form-title">Acciones clandestinas de felicitaci√≥n</h2>
                <p style="margin-bottom: 15px;">Documentaci√≥n de protestas previas y actos de desobediencia civil relacionados con la felicitaci√≥n de cumplea√±os:</p>
                
                <div class="gallery" id="rebellion-gallery">
                    <!-- La galer√≠a se generar√° con JavaScript -->
                </div>
            </div>
        </div>
        
        <div class="modal" id="thank-you">
            <h2>¬°Gracias por tu firma!</h2>
            <p>Tu acto de rebeld√≠a ha sido registrado. ¬°Jaime agradece tu apoyo!</p>
            <button class="close-btn" id="close-thank-you">Cerrar</button>
        </div>
        
        <div class="modal" id="excuse-modal">
            <h2>Excusa generada por si te atrapan</h2>
            <p id="excuse-text">No estaba felicitando un cumplea√±os, estaba... [excusa]</p>
            <button class="close-btn" id="generate-new-excuse">Generar otra excusa</button>
            <button class="close-btn" id="close-excuse-modal" style="margin-left: 10px;">Cerrar</button>
        </div>
        
        <div class="modal" id="ip-modal">
            <h2>Verificando seguridad de conexi√≥n</h2>
            <div class="ip-status">
                <div class="status-icon checking" id="status-icon"></div>
                <div id="ip-status-text">Comprobando si tu conexi√≥n es segura...</div>
            </div>
            <div class="loading-bar">
                <div class="loading-progress" id="ip-progress"></div>
            </div>
            <p id="ip-details" style="margin-top: 20px; font-size: 0.9em; color: #666;"></p>
            <button class="close-btn hidden" id="close-ip-modal">Cerrar</button>
        </div>
        
        <div class="modal" id="certificate-modal">
            <div class="certificate-container">
                <div class="certificate-watermark">REBELDE</div>
                <div class="certificate-header">Rep√∫blica Independiente del Cumplea√±os</div>
                <div class="certificate-title">Certificado de Rebeld√≠a</div>
                <div class="certificate-body">
                    Por la presente se certifica que:
                </div>
                <div class="certificate-name" id="certificate-name">NOMBRE DEL REBELDE</div>
                <div class="certificate-body">
                    Ha demostrado un extraordinario valor al desafiar la prohibici√≥n gubernamental
                    de felicitar cumplea√±os, y se le reconoce oficialmente como miembro de
                    la resistencia por la libertad de celebraci√≥n.
                </div>
                <div class="certificate-footer">
                    <div>
                        <div class="certificate-seal">OFICIAL</div>
                    </div>
                    <div>
                        <div class="certificate-signature">La Resistencia</div>
                        <div>1 de abril de 2025</div>
                    </div>
                </div>
            </div>
            <button class="close-btn" id="download-certificate" style="margin-top: 20px; margin-right: 10px;">Descargar</button>
            <button class="close-btn" id="close-certificate-modal" style="margin-top: 20px;">Cerrar</button>
        </div>
        
        <div class="confetti-container" id="confetti-container"></div>
        <canvas id="fireworks-canvas"></canvas>
        
        <footer>
            <p>¬© 2025 Movimiento de Resistencia por los Cumplea√±os | Este sitio es una broma de cumplea√±os para Jaime</p>
            <p><small>Pulsa <span style="font-family: monospace;">Alt+R</span> para volver a la protesta desde el modo inc√≥gnito</small></p>
        </footer>
    </div>
    
    <!-- P√°gina de recetas (modo inc√≥gnito) -->
    <div id="recipe-page" class="recipe-page hidden">
        <div class="recipe-header">
            <h1 class="recipe-title">Receta de Tortilla de Patatas Tradicional</h1>
            <div class="recipe-meta">Publicado el 1 de abril de 2025 | Tiempo de preparaci√≥n: 45 minutos</div>
        </div>
        
        <div class="recipe-img">
            [Imagen de una deliciosa tortilla de patatas]
        </div>
        
        <div class="recipe-section">
            <h3>Ingredientes</h3>
            <ul class="ingredients-list">
                <li>6 huevos grandes</li>
                <li>1 kg de patatas</li>
                <li>1 cebolla grande (opcional)</li>
                <li>200 ml de aceite de oliva virgen extra</li>
                <li>Sal al gusto</li>
            </ul>
        </div>
        
        <div class="recipe-section">
            <h3>Instrucciones</h3>
            <ol class="instructions-list">
                <li>Pelar y cortar las patatas en rodajas finas, aproximadamente de 0.5 cm de grosor.</li>
                <li>Pelar y cortar la cebolla en juliana fina (si la usas).</li>
                <li>Calentar el aceite en una sart√©n grande a fuego medio-bajo.</li>
                <li>A√±adir las patatas y la cebolla, y cocinar a fuego lento durante unos 25-30 minutos, removiendo ocasionalmente con cuidado para no romper las patatas.</li>
                <li>Mientras tanto, batir los huevos en un bol grande y sazonar con sal.</li>
                <li>Cuando las patatas est√©n tiernas (no crujientes ni doradas), escurrirlas del aceite y a√±adirlas a los huevos batidos.</li>
                <li>Dejar reposar la mezcla durante 5 minutos para que los sabores se integren.</li>
                <li>Calentar 2 cucharadas del aceite usado en una sart√©n antiadherente a fuego medio.</li>
                <li>Verter la mezcla en la sart√©n y cocinar durante unos 3-4 minutos, moviendo la sart√©n ocasionalmente para evitar que se pegue.</li>
                <li>Cuando el borde est√© cuajado pero el centro a√∫n est√© l√≠quido, colocar un plato grande sobre la sart√©n y darle la vuelta r√°pidamente.</li>
                <li>Deslizar la tortilla de nuevo en la sart√©n con el lado crudo hacia abajo y cocinar otros 3-4 minutos.</li>
                <li>Repetir el proceso de voltear la tortilla 1-2 veces m√°s para lograr una forma redonda perfecta.</li>
                <li>Servir caliente o a temperatura ambiente, cortada en cu√±as.</li>
            </ol>
        </div>
        
        <div class="recipe-section">
            <h3>Consejos</h3>
            <p>Para una tortilla m√°s jugosa, reducir ligeramente el tiempo de cocci√≥n. Si prefieres que est√© m√°s cuajada, coc√≠nala un poco m√°s por cada lado. La tortilla espa√±ola es perfecta para servir como tapa, en un bocadillo o como plato principal acompa√±ada de una ensalada verde.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Variables globales
            let isDarkMode = false;
            const protestPage = document.getElementById('protest-page');
            const recipePage = document.getElementById('recipe-page');
            
            // Datos iniciales de firmas
            const initialSignatures = [
                { name: "Nacho", message: "¬°Feliz cumplea√±os, Jaime! ¬°Que la prohibici√≥n no te detenga!", timestamp: "2025-04-01 09:15" },
                { name: "Joaqu√≠n", message: "En rebeld√≠a y solidaridad. ¬°Felicidades, crack!", timestamp: "2025-04-01 09:22" },
                { name: "Mart√≠n", message: "Ni el gobierno puede detener mis felicitaciones. ¬°Cumple feliz!", timestamp: "2025-04-01 09:30" },
                { name: "√Ålvaro", message: "¬°Feliz vuelta al sol! Resistencia siempre.", timestamp: "2025-04-01 09:45" },
                { name: "Benet", message: "M√°s a√±os, m√°s sabidur√≠a, y m√°s resistencia contra las prohibiciones absurdas.", timestamp: "2025-04-01 10:05" },
                { name: "Luis", message: "¬°Que cumplas muchos m√°s y que sigamos salt√°ndonos las normas juntos!", timestamp: "2025-04-01 10:17" },
                { name: "Pablo", message: "Para el mejor amigo, ni una ley injusta me impedir√° felicitarte.", timestamp: "2025-04-01 10:28" },
                { name: "David", message: "Un a√±o m√°s, un a√±o mejor. ¬°Felicidades en rebeld√≠a!", timestamp: "2025-04-01 10:36" },
                { name: "Ra√∫l", message: "Si proh√≠ben los cumplea√±os, ¬°prohibiremos las prohibiciones! ¬°Feliz d√≠a!", timestamp: "2025-04-01 10:42" },
                { name: "Alex", message: "¬°La resistencia irlandesa te desea un cumplea√±os inolvidable! üçÄ", timestamp: "2025-04-01 10:55" },
                { name: "Bono", message: "Prohibido prohibir cumplea√±os. ¬°Feliz d√≠a, m√°quina!", timestamp: "2025-04-01 11:03" }
            ];
            
            // Inicializar firmas
            let signatures = [...initialSignatures];
            
            // Renderizar firmas iniciales
            renderSignatures();
            
            // Inicializar mapa de resistencia
            initResistanceMap();
            
            // Inicializar tarjetas de buscados
            initWantedPosters();
            
            // Inicializar galer√≠a de rebeli√≥n
            initRebellionGallery();
            
            // Inicializar reloj
            updateClock();
            setInterval(updateClock, 60000);
            
            // Inicializar cuenta regresiva
            let countdownTime = 5 * 60; // 5 minutos en segundos
            const countdownInterval = setInterval(updateCountdown, 1000);
            updateCountdown();
            
            // Canvas para fuegos artificiales
            const canvas = document.getElementById('fireworks-canvas');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const ctx = canvas.getContext('2d');
            
            // Manejadores de eventos para pesta√±as
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Activar pesta√±a
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Mostrar contenido
                    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
            
            // Manejar env√≠o del formulario
            const form = document.getElementById('protest-form');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const nameInput = document.getElementById('name');
                const messageInput = document.getElementById('message');
                
                // Validar que al menos hay un nombre
                if (!nameInput.value.trim()) {
                    alert('Por favor, introduce tu nombre para firmar la protesta.');
                    return;
                }
                
                // Crear nueva firma
                const newSignature = {
                    name: nameInput.value.trim(),
                    message: messageInput.value.trim(),
                    timestamp: getCurrentTimestamp()
                };
                
                // A√±adir al principio del array
                signatures.unshift(newSignature);
                
                // Actualizar UI
                renderSignatures();
                updateCounter();
                
                // Mostrar agradecimiento
                showThankYou();
                
                // Lanzar confeti y fuegos artificiales
                createConfetti();
                launchFireworks();
                
                // Limpiar formulario
                form.reset();
                
                // A√±adir punto al mapa
                addMapDot();
                
                // Actualizar contador de rebeldes
                updateRebelsCount();
            });
            
            // Bot√≥n modo oscuro
            document.getElementById('dark-mode-btn').addEventListener('click', toggleDarkMode);
            
            // Bot√≥n modo inc√≥gnito
            document.getElementById('incognito-btn').addEventListener('click', toggleIncognitoMode);
            
            // Escuchar Alt+R para volver de modo inc√≥gnito
            document.addEventListener('keydown', function(e) {
                if (e.altKey && e.key === 'r') {
                    if (protestPage.classList.contains('hidden')) {
                        toggleIncognitoMode();
                    }
                }
            });
            
            // Bot√≥n generador de excusas
            document.getElementById('excuse-btn').addEventListener('click', showExcuseGenerator);
            document.getElementById('generate-new-excuse').addEventListener('click', generateExcuse);
            document.getElementById('close-excuse-modal').addEventListener('click', function() {
                document.getElementById('excuse-modal').classList.remove('show');
            });
            
            // Bot√≥n verificar IP
            document.getElementById('ip-check-btn').addEventListener('click', checkIPSecurity);
            document.getElementById('close-ip-modal').addEventListener('click', function() {
                document.getElementById('ip-modal').classList.remove('show');
            });
            
            // Bot√≥n certificado
            document.getElementById('certificate-btn').addEventListener('click', showCertificate);
            document.getElementById('close-certificate-modal').addEventListener('click', function() {
                document.getElementById('certificate-modal').classList.remove('show');
            });
            document.getElementById('download-certificate').addEventListener('click', function() {
                alert('¬°Certificado descargado! (En una implementaci√≥n real, generar√≠a un PDF o imagen del certificado)');
            });
            
            // Cerrar modal de agradecimiento
            document.getElementById('close-thank-you').addEventListener('click', function() {
                document.getElementById('thank-you').classList.remove('show');
            });
            
            // Funci√≥n para renderizar firmas
            function renderSignatures() {
                const signatureList = document.getElementById('signature-list');
                signatureList.innerHTML = '';
                
                signatures.forEach(signature => {
                    const signatureItem = document.createElement('div');
                    signatureItem.classList.add('signature-item');
                    
                    const content = `
                        <div>
                            <div class="name">${escapeHTML(signature.name)}</div>
                            ${signature.message ? `<div class="message-text">"${escapeHTML(signature.message)}"</div>` : ''}
                        </div>
                        <div class="timestamp">${signature.timestamp}</div>
                    `;
                    
                    signatureItem.innerHTML = content;
                    signatureList.appendChild(signatureItem);
                });
                
                // Actualizar contador
                updateCounter();
            }
            
            // Funci√≥n para escapar HTML y prevenir XSS
            function escapeHTML(str) {
                return str
                    .replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;')
                    .replace(/"/g, '&quot;')
                    .replace(/'/g, '&#039;');
            }
            
            // Funci√≥n para obtener timestamp actual formateado
            function getCurrentTimestamp() {
                const now = new Date();
                const year = now.getFullYear();
                const month = String(now.getMonth() + 1).padStart(2, '0');
                const day = String(now.getDate()).padStart(2, '0');
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                
                return `${year}-${month}-${day} ${hours}:${minutes}`;
            }
            
            // Actualizar contador
            function updateCounter() {
                const counter = document.getElementById('signature-count');
                counter.textContent = signatures.length;
                
                // Efecto de actualizaci√≥n
                counter.style.transform = 'scale(1.3)';
                setTimeout(() => {
                    counter.style.transform = 'scale(1)';
                }, 300);
            }
            
            // Mostrar mensaje de agradecimiento
            function showThankYou() {
                const thankYou = document.getElementById('thank-you');
                thankYou.classList.add('show');
                
                // Auto-cerrar despu√©s de 5 segundos
                setTimeout(() => {
                    thankYou.classList.remove('show');
                }, 5000);
            }
            
            // Funci√≥n para crear confeti
            function createConfetti() {
                const confettiContainer = document.getElementById('confetti-container');
                confettiContainer.innerHTML = '';
                
                const colors = ['#ff4500', '#4169e1', '#32cd32', '#ffd700', '#9932cc', '#ff69b4'];
                
                for (let i = 0; i < 100; i++) {
                    const confetti = document.createElement('div');
                    confetti.classList.add('confetti');
                    
                    // Propiedades aleatorias
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    const left = Math.random() * 100 + 'vw';
                    const animationDuration = Math.random() * 3 + 2 + 's';
                    const size = Math.random() * 10 + 5 + 'px';
                    
                    // Forma aleatoria
                    const shape = Math.random() > 0.5 ? '50%' : '0';
                    
                    // Aplicar estilos
                    confetti.style.backgroundColor = color;
                    confetti.style.left = left;
                    confetti.style.width = size;
                    confetti.style.height = size;
                    confetti.style.borderRadius = shape;
                    confetti.style.position = 'absolute';
                    confetti.style.top = '-20px';
                    confetti.style.opacity = Math.random();
                    
                    // Animaci√≥n personalizada
                    confetti.style.animation = `fall ${animationDuration} ease-in forwards`;
                    
                    // A√±adir al contenedor
                    confettiContainer.appendChild(confetti);
                    
                    // Crear animaci√≥n de ca√≠da
                    const keyframes = `
                        @keyframes fall {
                            0% {
                                transform: translateY(0) rotate(0deg);
                                opacity: ${Math.random()};
                            }
                            50% {
                                transform: translateY(50vh) rotate(${Math.random() * 360}deg);
                                opacity: ${Math.random()};
                            }
                            100% {
                                transform: translateY(100vh) rotate(${Math.random() * 720}deg);
                                opacity: 0;
                            }
                        }
                    `;
                    
                    // A√±adir keyframes al documento
                    const style = document.createElement('style');
                    style.innerHTML = keyframes;
                    document.head.appendChild(style);
                    
                    // Eliminar despu√©s de la animaci√≥n
                    setTimeout(() => {
                        confetti.remove();
                        style.remove();
                    }, parseFloat(animationDuration) * 1000);
                }
            }
            
            // Funci√≥n para lanzar fuegos artificiales
            function launchFireworks() {
                const numFireworks = 5;
                let activeFireworks = 0;
                
                for (let i = 0; i < numFireworks; i++) {
                    setTimeout(() => {
                        launchFirework();
                        activeFireworks++;
                        
                        if (activeFireworks === numFireworks) {
                            setTimeout(() => {
                                // Limpiar canvas despu√©s de que terminen los fuegos artificiales
                                ctx.clearRect(0, 0, canvas.width, canvas.height);
                            }, 2000);
                        }
                    }, i * 200);
                }
            }
            
            function launchFirework() {
                const x = Math.random() * canvas.width;
                const y = canvas.height;
                const targetY = canvas.height * 0.3 + (Math.random() * canvas.height * 0.3);
                
                // Color del cohete
                const rocketColor = '#fff';
                
                // Animaci√≥n de subida del cohete
                let currentY = y;
                const rocketSpeed = 5;
                
                const rocketInterval = setInterval(() => {
                    // Limpiar trazo anterior
                    ctx.clearRect(x - 2, currentY, 4, 10);
                    
                    // Actualizar posici√≥n
                    currentY -= rocketSpeed;
                    
                    // Dibujar cohete
                    ctx.fillStyle = rocketColor;
                    ctx.beginPath();
                    ctx.arc(x, currentY, 2, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Si lleg√≥ a su objetivo, explotar
                    if (currentY <= targetY) {
                        clearInterval(rocketInterval);
                        explodeFirework(x, currentY);
                    }
                }, 10);
            }
            
            function explodeFirework(x, y) {
                const particles = [];
                const numParticles = 50;
                const colors = ['#ff4500', '#ffff00', '#00ff00', '#00ffff', '#0000ff', '#ff00ff'];
                
                // Crear part√≠culas
                for (let i = 0; i < numParticles; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const speed = 1 + Math.random() * 3;
                    const size = 1 + Math.random() * 2;
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    
                    particles.push({
                        x,
                        y,
                        vx: Math.cos(angle) * speed,
                        vy: Math.sin(angle) * speed,
                        size,
                        color,
                        alpha: 1
                    });
                }
                
                // Sonido de explosi√≥n
                const frequencies = [400, 500, 600];
                playFireworkSound(frequencies[Math.floor(Math.random() * frequencies.length)]);
                
                // Animar part√≠culas
                const explosionInterval = setInterval(() => {
                    // Limpiar canvas
                    ctx.clearRect(x - 100, y - 100, 200, 200);
                    
                    let allDead = true;
                    
                    // Actualizar y dibujar part√≠culas
                    particles.forEach(particle => {
                        // Actualizar posici√≥n
                        particle.x += particle.vx;
                        particle.y += particle.vy;
                        
                        // A√±adir gravedad
                        particle.vy += 0.05;
                        
                        // Reducir alfa
                        particle.alpha -= 0.01;
                        
                        if (particle.alpha > 0) {
                            allDead = false;
                            
                            // Dibujar part√≠cula
                            ctx.globalAlpha = particle.alpha;
                            ctx.fillStyle = particle.color;
                            ctx.beginPath();
                            ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                            ctx.fill();
                        }
                    });
                    
                    // Restaurar alfa
                    ctx.globalAlpha = 1;
                    
                    // Si todas las part√≠culas han desaparecido, detener la animaci√≥n
                    if (allDead) {
                        clearInterval(explosionInterval);
                    }
                }, 20);
            }
            
            // Funci√≥n para reproducir el sonido de fuegos artificiales
            function playFireworkSound(frequency) {
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.type = 'sine';
                    oscillator.frequency.value = frequency;
                    gainNode.gain.value = 0.1;
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.start();
                    
                    // Reducir volumen gradualmente
                    gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.5);
                    
                    // Detener despu√©s de medio segundo
                    setTimeout(() => {
                        oscillator.stop();
                    }, 500);
                } catch (e) {
                    // Silenciar errores de audio
                    console.log('Audio not supported');
                }
            }
            
            // Inicializar mapa de resistencia
            function initResistanceMap() {
                const map = document.getElementById('resistance-map');
                
                // Puntos iniciales en el mapa (coordenadas relativas: 0-100%)
                const initialDots = [
                    { x: 25, y: 20 },  // Norte
                    { x: 85, y: 15 },  // Noreste
                    { x: 15, y: 65 },  // Oeste
                    { x: 60, y: 90 },  // Sur
                    { x: 50, y: 50 },  // Centro
                    { x: 90, y: 70 }   // Este
                ];
                
                // Crear puntos iniciales
                initialDots.forEach(dot => {
                    createMapDot(dot.x, dot.y);
                });
                
                // Animar puntos aleatorios cada 3-7 segundos
                setInterval(() => {
                    const randomDot = initialDots[Math.floor(Math.random() * initialDots.length)];
                    // A√±adir variaci√≥n aleatoria
                    const x = randomDot.x + (Math.random() * 10 - 5);
                    const y = randomDot.y + (Math.random() * 10 - 5);
                    createMapDot(x, y);
                }, Math.random() * 4000 + 3000);
            }
            
            // Crear un punto en el mapa
            function createMapDot(x, y) {
                const map = document.getElementById('resistance-map');
                const dot = document.createElement('div');
                dot.classList.add('map-dot');
                dot.style.left = `${x}%`;
                dot.style.top = `${y}%`;
                map.appendChild(dot);
                
                // Eliminar despu√©s de la animaci√≥n
                setTimeout(() => {
                    dot.remove();
                }, 3000);
            }
            
            // A√±adir un punto aleatorio al mapa
            function addMapDot() {
                const x = 10 + Math.random() * 80; // 10-90%
                const y = 10 + Math.random() * 80; // 10-90%
                createMapDot(x, y);
            }
            
            // Actualizar contador de rebeldes
            function updateRebelsCount() {
                const rebelsCount = document.getElementById('rebels-count');
                const currentCount = parseInt(rebelsCount.textContent.replace(',', ''));
                const newCount = currentCount + Math.floor(Math.random() * 10) + 1;
                rebelsCount.textContent = newCount.toLocaleString();
                
                // Efecto de actualizaci√≥n
                rebelsCount.style.color = 'var(--primary-color)';
                rebelsCount.style.fontWeight = 'bold';
                setTimeout(() => {
                    rebelsCount.style.color = '';
                    rebelsCount.style.fontWeight = '';
                }, 1000);
            }
            
            // Inicializar tarjetas de buscados
            function initWantedPosters() {
                const wantedGrid = document.getElementById('wanted-grid');
                const wantedData = [
                    { name: "El Pastelero", crime: "Distribuci√≥n de tartas de cumplea√±os", reward: "500‚Ç¨" },
                    { name: "La Vocalista", crime: "Cantar 'Cumplea√±os Feliz' en p√∫blico", reward: "750‚Ç¨" },
                    { name: "El Decorador", crime: "Colgar guirnaldas y globos", reward: "300‚Ç¨" },
                    { name: "El Cartero", crime: "Reparto de tarjetas de felicitaci√≥n", reward: "600‚Ç¨" },
                    { name: "El Fot√≥grafo", crime: "Documentar celebraciones clandestinas", reward: "450‚Ç¨" },
                    { name: "La Regaladora", crime: "Entrega de paquetes sospechosos", reward: "800‚Ç¨" }
                ];
                
                wantedData.forEach(wanted => {
                    const card = document.createElement('div');
                    card.classList.add('wanted-card');
                    
                    card.innerHTML = `
                        <div class="wanted-header">Se Busca</div>
                        <div class="wanted-img">üë§</div>
                        <div class="wanted-info">
                            <div class="wanted-name">${wanted.name}</div>
                            <div class="wanted-crime">Delito: ${wanted.crime}</div>
                            <div class="wanted-reward">Recompensa: ${wanted.reward}</div>
                        </div>
                    `;
                    
                    wantedGrid.appendChild(card);
                });
            }
            
            // Inicializar galer√≠a de rebeli√≥n
            function initRebellionGallery() {
                const gallery = document.getElementById('rebellion-gallery');
                const galleryData = [
                    { caption: "Fiesta clandestina en Madrid (Marzo 2025)" },
                    { caption: "Intercambio ilegal de regalos en Barcelona" },
                    { caption: "Taller subterr√°neo de fabricaci√≥n de tartas" },
                    { caption: "Almac√©n secreto de velas de cumplea√±os" },
                    { caption: "Reuni√≥n de la resistencia en Valencia" },
                    { caption: "Transporte encubierto de globos y serpentinas" }
                ];
                
                galleryData.forEach(item => {
                    const galleryItem = document.createElement('div');
                    galleryItem.classList.add('gallery-item');
                    
                    galleryItem.innerHTML = `
                        <div class="gallery-img">üì∑</div>
                        <div class="gallery-caption">${item.caption}</div>
                    `;
                    
                    gallery.appendChild(galleryItem);
                });
            }
            
            // Actualizar reloj
            function updateClock() {
                const clock = document.getElementById('clock');
                const now = new Date();
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                clock.textContent = `${hours}:${minutes}`;
            }
            
            // Actualizar cuenta regresiva
            function updateCountdown() {
                const countdown = document.getElementById('countdown');
                
                if (countdownTime <= 0) {
                    clearInterval(countdownInterval);
                    countdown.textContent = "¬°CONEXI√ìN SEGURA ESTABLECIDA!";
                    countdown.style.color = "#00ff00";
                    return;
                }
                
                const minutes = Math.floor(countdownTime / 60);
                const seconds = countdownTime % 60;
                
                countdown.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                
                // Efecto de urgencia cuando queda poco tiempo
                if (countdownTime < 60) {
                    countdown.style.color = "#ff0000";
                } else if (countdownTime < 120) {
                    countdown.style.color = "#ff8800";
                }
                
                countdownTime--;
            }
            
            // Alternar modo oscuro
            function toggleDarkMode() {
                isDarkMode = !isDarkMode;
                document.documentElement.setAttribute('data-theme', isDarkMode ? 'dark' : 'light');
                
                // Cambiar texto del bot√≥n
                const darkModeBtn = document.getElementById('dark-mode-btn');
                if (isDarkMode) {
                    darkModeBtn.innerHTML = '<span>‚òÄÔ∏è</span> Modo Diurno';
                } else {
                    darkModeBtn.innerHTML = '<span>üåô</span> Modo Nocturno';
                }
            }
            
            // Alternar modo inc√≥gnito
            function toggleIncognitoMode() {
                if (protestPage.classList.contains('hidden')) {
                    // Volver al modo normal
                    protestPage.classList.remove('hidden');
                    recipePage.classList.add('hidden');
                } else {
                    // Activar modo inc√≥gnito
                    protestPage.classList.add('hidden');
                    recipePage.classList.remove('hidden');
                }
            }
            
            // Mostrar generador de excusas
            function showExcuseGenerator() {
                const excuseModal = document.getElementById('excuse-modal');
                excuseModal.classList.add('show');
                generateExcuse();
            }
            
            // Generar excusa
            function generateExcuse() {
                const excuses = [
                    "No estaba felicitando un cumplea√±os, estaba realizando un estudio sociol√≥gico sobre rituales anuales.",
                    "Esto no es una felicitaci√≥n, es una conmemoraci√≥n de la rotaci√≥n terrestre desde el nacimiento del sujeto.",
                    "Solo estaba midiendo el impacto emocional de ciertas frases en d√≠as espec√≠ficos del calendario.",
                    "En realidad estaba practicando mi pronunciaci√≥n en un nuevo idioma donde 'feliz cumplea√±os' significa 'buen d√≠a normal'.",
                    "Estaba recitando un poema que casualmente contiene palabras que pueden malinterpretarse como felicitaci√≥n.",
                    "Esto es parte de un experimento psicol√≥gico autorizado por el Ministerio de Ciencia.",
                    "No es una felicitaci√≥n, es una expresi√≥n de alivio por la supervivencia continuada del individuo.",
                    "Estaba probando la ac√∫stica de la sala con frases aleatorias.",
                    "Solo estaba comentando la coincidencia estad√≠stica entre hoy y cierto evento hist√≥rico.",
                    "Es un ejercicio de dicci√≥n recomendado por mi logopeda."
                ];
                
                const excuseText = document.getElementById('excuse-text');
                excuseText.textContent = excuses[Math.floor(Math.random() * excuses.length)];
            }
            
            // Verificar seguridad de IP
            function checkIPSecurity() {
                const ipModal = document.getElementById('ip-modal');
                const statusIcon = document.getElementById('status-icon');
                const statusText = document.getElementById('ip-status-text');
                const progress = document.getElementById('ip-progress');
                const ipDetails = document.getElementById('ip-details');
                const closeBtn = document.getElementById('close-ip-modal');
                
                // Reiniciar estado
                statusIcon.className = 'status-icon checking';
                statusText.textContent = 'Comprobando si tu conexi√≥n es segura...';
                progress.style.width = '0%';
                ipDetails.textContent = '';
                closeBtn.classList.add('hidden');
                
                // Mostrar modal
                ipModal.classList.add('show');
                
                // Simulaci√≥n de progreso
                let progressValue = 0;
                const progressInterval = setInterval(() => {
                    progressValue += Math.random() * 15;
                    if (progressValue >= 100) {
                        progressValue = 100;
                        clearInterval(progressInterval);
                        
                        // Completado
                        setTimeout(() => {
                            statusIcon.className = 'status-icon secure';
                            statusText.textContent = '¬°Conexi√≥n segura establecida!';
                            ipDetails.innerHTML = `
                                <strong>Informaci√≥n de seguridad:</strong><br>
                                - Conexi√≥n: Encriptada (AES-256)<br>
                                - Enrutamiento: A trav√©s de 7 nodos internacionales<br>
                                - Ubicaci√≥n aparente: Dubl√≠n, Irlanda üáÆüá™<br>
                                - Estado: Indetectable por autoridades<br>
                                - Nivel de seguridad: M√°ximo
                            `;
                            closeBtn.classList.remove('hidden');
                        }, 500);
                    }
                    progress.style.width = `${progressValue}%`;
                }, 200);
            }
            
            // Mostrar certificado
            function showCertificate() {
                const certificateModal = document.getElementById('certificate-modal');
                const certificateName = document.getElementById('certificate-name');
                
                // Obtener nombre si existe
                const nameInput = document.getElementById('name');
                if (nameInput.value.trim()) {
                    certificateName.textContent = nameInput.value.trim().toUpperCase();
                } else {
                    certificateName.textContent = "REBELDE AN√ìNIMO";
                }
                
                // Mostrar modal
                certificateModal.classList.add('show');
            }
            
            // Hacer que el canvas de fuegos artificiales se ajuste al tama√±o de la ventana
            window.addEventListener('resize', function() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        });
    </script>
</body>
</html>